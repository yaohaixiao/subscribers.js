<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="subscribers.js,JavaScript,Publish,Subscribe"><meta name="description" content="subscribers.js 小巧且实用的发布/订阅工具库！"><title>subscribes.js | 又一个小巧简单而且实用的发布/订阅 JavaScript 工具库！</title><link rel="preload" href="css/docs.min.css" as="style"><link rel="preload" href="js/docs.min.js" as="script"><link href="css/docs.min.css" rel="stylesheet" type="text/css"></head><body><div class="docs" id="docs"><aside class="aside" id="aside"><header class="aside__header"><h2 class="aside__h2">API Docs</h2></header><nav class="aside__nav"><h3 class="aside__h3">Methods</h3><ul class="aside__list"><li class="aside__item"><a class="aside__anchor" href="#method-subscribe">subscribe()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-subscribeOnce">subscribeOnce()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-publish">publish()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-notify">notify()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-unsubscribe">unsubscribe()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-getSubscribers">getSubscribers()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-hasDirectSubscribersFor">hasDirectSubscribersFor()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-hasSubscribers">hasSubscribers()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-deleteSubscriber">deleteSubscriber()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-deleteSubscribers">deleteSubscribers()</a></li><li class="aside__item"><a class="aside__anchor" href="#method-clear">clear()</a></li></ul></nav></aside><main class="main" id="main"><div class="main__header" id="header"><h1 class="main__h1"><strong class="main__name">subscribers.</strong>js</h1><p class="main__tagline">subscribers.js 小巧且实用的发布/订阅工具库！</p></div><div class="main__cdn" id="cdn"><pre class="main__pre"><code>&lt;script src="https://cdn.jsdelivr.net/gh/yaohaixiao/subscribers.js/dist/subscribers.min.js"&gt;&lt;/script&gt;</code></pre></div><div class="main__download" id="download"><a class="main__button" href="https://github.com/yaohaixiao/subscribers.js/archive/refs/heads/main.zip" target="_blank">Download Zip</a></div><section class="section" id="methods"><header class="section__header"><h2 class="section__title">Methods</h2></header><section class="section"><header class="section__header"><h3 class="section__h3" id="method-subscribe">subscribe(topic, handler)</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>订阅主题，并给出处理器函数。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">topic</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（必须）主题名称。</p><h5 class="section__h4">handler</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Function</dd></dl><p>（（必须）主题的处理器函数。</p><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String。</dd></dl><p>唯一的 token 字符串。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)

// 支持命名空间形式的主题的订阅
Subscribers.subscribe('author.career', handlerCareer)
Subscribers.subscribe('author.career.years', handlerYears)</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-subscribeOnce">subscribeOnce(topic, handler)</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>订阅主题，并给出处理器函数，仅执行一次。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">topic</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（必须）主题名称。</p><h5 class="section__h4">handler</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Function</dd></dl><p>（（必须）主题的处理器函数。</p><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String。</dd></dl><p>唯一的 token 字符串。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribeOnce('author', handlerAuthor)

Subscribers.publish('author', 'ok')

// handlerAuthor() 函数将不再执行
Subscribers.publish('author', 'again')</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-publish">publish(topic, data[, async = true])</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>发布订阅主题信息。subscribers.js 主题默认是异步发布的。确保在消费者处理主题时，主题的发起者不会被阻止。 当然 publish() 方法也支持同步主题发布。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">topic</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（必须）主题名称。</p><h5 class="section__h4">data</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Object</dd></dl><p>（必须）消息传递的数据对象。</p><h5 class="section__h4">async</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Boolean</dd></dl><dl class="section__dl"><dt class="section__dt">Default：</dt><dd class="section__dd">true</dd></dl><p>(可选) 是否异步发布。默认值：true。</p><ul><li>当 async 设置为 true（默认） 时，异步发布；</li><li>当 async 设置为 false 时，同步发布；</li></ul><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Object。</dd></dl><p>Subscribers 对象。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)
Subscribers.subscribe('author.career', handlerCareer)
Subscribers.subscribe('author.career.years', handlerYears)

// 异步发布
Subscribers.publish('author', 'ok')
// 同步发布
Subscribers.publish('author', 'ok', false)</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-notify">notify(topic, data)</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>同步发布订阅主题信息。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">topic</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（必须）主题名称。</p><h5 class="section__h4">data</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Object</dd></dl><p>（必须）消息传递的数据对象。</p><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Object。</dd></dl><p>Subscribers 对象。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)
Subscribers.subscribe('author.career', handlerCareer)

// 异步发布
Subscribers.notify('author', 'ok')
// 同步发布
Subscribers.publish('author.career', 'ok')</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-unsubscribe">unsubscribe(topic[, token])</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>取消订阅主题。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">topic</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（必须）主题名称。</p><h5 class="section__h4">token</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Function | String</dd></dl><p>（可选）订阅主题的处理器函数或者唯一 Id 值。</p><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Object。</dd></dl><p>Subscribers 对象。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)
const token = Subscribers.subscribe('author.career', handlerCareer)

// 取消订阅 author 主题
Subscribers.unsubscribe('author',handlerAuthor)

// 取消订阅 author.career 主题
Subscribers.unsubscribe('author.career', token)</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-getSubscribers">getSubscribers([topic])</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>获取全部或者包含 topic 主题的订阅者信息。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">topic</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（可选）主题名称。</p><ul><li>传递 topic 参数，返回包含 topic 主题的订阅者信息;</li><li>不传递 topic 参数，返回全部订阅者信息；</li></ul><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Array。</dd></dl><p>返回全部或者包含 topic 主题的订阅者数组对象信息。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)
Subscribers.subscribe('author.career', handlerCareer)
Subscribers.subscribe('author.career.years', handlerYears)

// 获取 author 主题订阅者信息
Subscribers.getSubscribers('author')

// 获取所有订阅者信息
Subscribers.getSubscribers()</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-hasDirectSubscribersFor">hasDirectSubscribersFor(topic)</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>判断是否存在特定 topic 指定的订阅者信息。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">topic</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（必须）主题名称。</p><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Boolean。</dd></dl><p>有 topic 订阅信息返回 true，否则返回 false。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)
Subscribers.subscribe('author.career.years', handlerYears)

Subscribers.hasDirectSubscribersFor('author.career.years')
// => true

Subscribers.hasDirectSubscribersFor('author.career.year')
// => false</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-hasSubscribers">hasSubscribers(topic)</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>判断是否存在包含 topic 指定的订阅者信息。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">topic</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（必须）主题名称。</p><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Boolean。</dd></dl><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)
Subscribers.subscribe('author.career.years', handlerYears)

Subscribers.hasSubscribers('author.career.years')
// => true

Subscribers.hasSubscribers('author.career.year')
// => true 因为包含 author 和 author.career 主题</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-deleteSubscriber">deleteSubscriber(topic)</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>删除特定 topic 主题的订阅者信息。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">topic</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（必须）主题名称。</p><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Object。</dd></dl><p>Subscribers 对象。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)

// 删除 author 主题相关的所有信息
Subscribers.deleteSubscriber('author')</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-deleteSubscribers">deleteSubscribers(topic)</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>删除包含 topic 主题的订阅者信息。</p><h4 class="section__h4">Parameters</h4><h5 class="section__h4">type</h5><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">String</dd></dl><p>（必须）主题名称。</p><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Object。</dd></dl><p>Subscribers 对象。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)
Subscribers.subscribe('author.career', handlerCareer)
Subscribers.subscribe('author.career.years', handlerYears)

// 删除包含 author 或者 author.career 主题相关的所有信息
Subscribers.deleteSubscribers('author.career')</code></pre></div></section><section class="section"><header class="section__header"><h3 class="section__h3" id="method-clear">clear()</h3></header><div class="section__content"><h4 class="section__h4">Description</h4><p>清理所有订阅者（主题和处理器的）信息。</p><h4 class="section__h4">Returns</h4><dl class="section__dl"><dt class="section__dt">Type：</dt><dd class="section__dd">Object。</dd></dl><p>Subscribers 对象。</p><pre class="section__pre"><code class="section__code">Subscribers.subscribe('author', handlerAuthor)
Subscribers.subscribe('author.career', handlerCareer)
Subscribers.subscribe('author.career.years', handlerYears)

// 清理所有订阅者（主题和处理器的）信息
Subscribers.clear()</code></pre></div></section></section><div class="main__footer" id="footer"><p>Copyright &copy; 2023 <a href="https://github.com/yaohaixiao">Robert Yao</a>, all right reserved.</p><p>Code licensed under&nbsp;<a href="http://opensource.org/licenses/mit-license.html">MIT License</a> · Documentation licensed under
<a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></p><p><a href="https://github.com/yaohaixiao/subscribers.js">View on GitHub</a> ·
<a href="https://github.com/yaohaixiao/subscribers.js/issues">Issues</a></p></div></main></div><div class="arrows"><div class="arrows__up" id="arrow-up"><svg class="arrows__icon" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 1024 1024"><path d="M494.784 261.696c0.832-0.448 1.536-1.216 2.368-1.536a38.72 38.72 0 0 1 46.08 8.256l277.824 302.272a41.92 41.92 0 0 1-1.536 58.048 39.104 39.104 0 0 1-56.448-1.6L513.728 355.904 260.736 626.048a39.104 39.104 0 0 1-56.448 1.088 41.6 41.6 0 0 1-1.088-57.984L483.84 269.696c0.512-0.512 1.344-0.768 1.92-1.408l1.088-1.344c2.368-2.496 5.312-3.648 8-5.248z"></path></svg></div><div class="arrows__down" id="arrow-down"><svg class="arrows__icon" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 1024 1024"><path d="M494.784 762.304c0.832 0.448 1.536 1.216 2.368 1.536 15.232 7.488 33.92 4.992 46.08-8.256l277.824-302.272a41.92 41.92 0 0 0-1.536-58.048 39.104 39.104 0 0 0-56.448 1.6l-249.344 271.232-252.992-270.144a39.104 39.104 0 0 0-56.448-1.088 41.6 41.6 0 0 0-1.088 57.984l280.576 299.456c0.512 0.512 1.344 0.768 1.92 1.408l1.088 1.344c2.368 2.496 5.312 3.648 8 5.248z"></path></svg></div></div><script src="js/docs.min.js"></script></body></html>