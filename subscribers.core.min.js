!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).subscribers=e()}(this,(function(){"use strict";const t={},e=(t,e)=>{const n=Object.prototype.hasOwnProperty;return t&&n.call(t,e)},n=n=>e(t,n)&&t[n].length>0,r=(t,e=!0)=>e?n(t):(t=>{let e=n(t),r=t.lastIndexOf(".");for(;!e&&-1!==r;)r=(t=t.substring(0,r)).lastIndexOf("."),e=n(t);return e})(t),o=(()=>{let t=0;return(e="guid-")=>(t+=1,`${e+t}`)})(),s=(e,n)=>{const r=o();return s=n,"[object Function]"===Object.prototype.toString.apply(s)&&(t[e]||(t[e]=[]),t[e].push({topic:e,callback:n,token:r}),r);var s},c=n=>{if(!e(t,n))return!1;delete t[n]},i=(e,n)=>{if(!r(e))return!1;n?(e=>{const n=Object.keys(t);if(!e||n.length<1)return!1;n.forEach((n=>{const r=t[n];let o;r.forEach(((t,n)=>{t.callback!==e&&t.token!==e||(o=t.topic,r.splice(-1,n))})),r.length<1&&c(o)}))})(n):c(e)};return{on:(t,e)=>s(t,e),emit(e,o,s=!0){return((e,o,s=!0)=>{const c=e=>{if(!n(e))return!1;t[e].forEach((t=>{t.callback(o)}))},i=()=>{let t=e,n=e.lastIndexOf(".");for(;-1!==n;)t=t.substring(0,n),n=t.lastIndexOf("."),c(t);c(e)};if(!r(e))return!1;s?setTimeout(i,10):i()})(e,o,s),this},off(t,e){return i(t,e),this}}}));
//# sourceMappingURL=subscribers.core.min.js.map
