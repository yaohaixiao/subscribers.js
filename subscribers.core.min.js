!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).subscribers=e()}(this,(function(){"use strict";const t={},e=(t,e)=>{const n=Object.prototype.hasOwnProperty;return t&&n.call(t,e)},n=n=>e(t,n)&&t[n].length>0,o=(t,e=!0)=>e?n(t):(t=>{let e=n(t),o=t.lastIndexOf(".");for(;!e&&-1!==o;)o=(t=t.substring(0,o)).lastIndexOf("."),e=n(t);return e})(t),r=(()=>{let t=0;return(e="guid-")=>(t+=1,`${e+t}`)})(),s=(e,n)=>{const o=r();let s="symbol"==typeof e?e.toString():e;return i=n,"[object Function]"===Object.prototype.toString.apply(i)&&(t[s]||(t[s]=[]),t[s].push({topic:s,callback:n,token:o}),o);var i},i=n=>{if(!e(t,n))return!1;delete t[n]},l=(e,n)=>{if(!o(e))return!1;n?(e=>{const n=Object.keys(t);if(!e||n.length<1)return!1;n.forEach((n=>{const o=t[n];let r;o.forEach(((t,n)=>{t.callback!==e&&t.token!==e||(r=t.topic,o.splice(-1,n))})),o.length<1&&i(r)}))})(n):i(e)};return{on:(t,e)=>s(t,e),emit(e,r,s=!0){return((e,r,s=!0)=>{const i=e=>{if(!n(e))return!1;t[e].forEach((t=>{t.callback(r)}))},l=()=>{let t=e,n=e.lastIndexOf(".");for(;-1!==n;)t=t.substring(0,n),n=t.lastIndexOf("."),i(t);i(e),i("*")};if(!o(e))return!1;s?setTimeout(l,10):l()})(e,r,s),this},off(t,e){return l(t,e),this}}}));
//# sourceMappingURL=subscribers.core.min.js.map
